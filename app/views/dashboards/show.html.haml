#dashboard
  %h1 Табло

  %p Здрасти. Тук може да намерите всевъзможна информация за представянето ви в курса.

  .group
    .left
      %h2 Точки
      .content
        Към момента имате
        %strong= pluralize @dashboard.points, 'точка', 'точки'
        и сте на
        %strong= @dashboard.rank
        място от общо
        %strong= @dashboard.total_ranks
        %p
          В секциите по-долу може да разберете по какви начини сте събрали тези точки както и от къде може
          да спечелите нови.

    .right
      %h2 Оценка
      .content
        Тук може да намерите статус на оценката ви към момента. Тъмния цвят показва това, което
        сте постигнали, а светлия - какво би могло да бъде, ако проектът ви е оценен с пълен
        брой точки.
        #grade-progress-bar
          %span{style: "width: #{@grade_progress * 500}px;"}= @dashboard.grade.name
          %span.project{style: "width: #{[@grade_with_project_progress * 500, 500 - @grade_progress * 500].min}px;"}= @dashboard.grade_with_project.name
        #grade-progress-bar-legend
          - @grades.each do |name, progress|
            %span{style: "left: #{progress * 500}px;"}= name

  .group
    .left
      %h2 Задачи
      .content
        - if @dashboard.tasks.empty?
          Към момента няма задачи.
        - else
          Имате
          %strong= pluralize @points_from_tasks, 'точка', 'точки'
          от задачи:
          %table.data-table
            %thead
              %tr
                %th Име
                %th Точки
            %tbody
              - @dashboard.tasks.each do |name, points|
                %tr
                  %td= name
                  %td{style: "width:20px"}= points
    .right
      %h2 Предизвикателства
      .content
        - if @dashboard.challenges.empty?
          Към момента няма предизвикателства.
        - else
          Имате
          %strong= pluralize @points_from_challenges, 'точка', 'точки'
          от предизвикателства:
          %table.data-table
            %thead
              %tr
                %th Име
                %th{style: "width:20px"} Статус
            %tbody
              - @dashboard.challenges.each do |name, status|
                %tr
                  %td= name
                  %td
                    - case status
                    - when :unchecked
                      Непроверено
                    - when :incorrect
                      Неуспешно
                    - when :correct
                      Успешно

  .group
    .left
      %h2 Признания
      .content
        %p
          Ако направите Pull Request в GitHub, с който допринасяте към сайта на курса,
          лекциите или задачите, ще получите признание, което ви носи <strong>1 точка</strong>.
        - if @dashboard.attributions.empty?
          Към момента нямате признания.
        - else
          Имате
          %strong= pluralize @dashboard.attributions.size, 'точка', 'точки'
          от признания:
          %ul
            - @dashboard.attributions.each do |attribution|
              %li
                = link_to attribution.reason, attribution.link
                - if admin?
                  (#{link_to 'Редактирай', [:edit, @user, attribution]})
    .right
      %h2 Звезди
      .content
        %p
          Ако отговорите на въпрос или публикувате нещо, което би могло да бъде полезно на
          останалите във форума ще получите <strong>1 точка</strong>.
        - if @dashboard.stars.empty?
          Към момента нямате звезди във форума.
        - else
          Имате
          %strong= pluralize @dashboard.stars.size, 'точка', 'точки'
          от звезди:
          %ul
            - @dashboard.stars.each do |post|
              %li= link_to post.topic.title, post_path(post)

  .group
    .left
      %h2 Профил
      .content
        %p
          Вашият профил е това, което преподавателите и другите студенти виждат за вас.
          Вярваме, че ако го поддържате актуален ще създавате по-добро впечатление и ще
          е по-лесно за другите участници в курса да се запознаят с вас.
        %p
          = link_to 'Редактиране', edit_profile_path, class: :action

    .right
      %h2 Точки за участие в час
      .content
        %p
          Ако участвате в час, получавате лакомство, комбинирано с ваучър код. Кодът
          ви дава <strong>1 точка</strong>. Ако имате такъв, побързайте да го въведете —
          времето им на съществуване е ограничено.
        %p
          Към момента имате
          %strong= pluralize @dashboard.vouchers, 'точка', 'точки'
          от участие в час.
        %p
          = link_to 'Въвеждане на код', new_voucher_claim_path, class: :action
